# CHANGELOG - Sprint 6.1 Stabilization

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 2024-11-30  
**–¢–∏–ø:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** V8WebKit 8.3.27+  

## –ü—Ä–æ–±–ª–µ–º—ã, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ S6.1

### üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ö–æ—Ç—Ñ–∏–∫—Å—ã

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π**
   - ‚ùå **–ë—ã–ª–æ:** `Identifier 'ensureHiDPI' has already been declared`
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –û—Å—Ç–∞–≤–ª–µ–Ω–∞ –µ–¥–∏–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `dashboard.bundle.js`
   - **–§–∞–π–ª—ã:** `index.html:2900` (—É–¥–∞–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è)

2. **ReferenceError –ø–µ—á–∞—Ç–∏/—ç–∫—Å–ø–æ—Ä—Ç–∞**  
   - ‚ùå **–ë—ã–ª–æ:** `printCurrentPage is not defined`
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `window`
   - **–§–∞–π–ª—ã:** `index.html:3850-3858` (–¥–æ–±–∞–≤–ª–µ–Ω—ã exports)

3. **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**
   - ‚ùå **–ë—ã–ª–æ:** `.newData`, `Math.max.`, `.data` –ø–æ—Å–ª–µ `=`
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ–ø–µ—á–∞—Ç–æ–∫
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ SyntaxError

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

4. **–ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–¥ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∞–ø–∫–æ–π**
   - ‚ùå **–ë—ã–ª–æ:** –ñ—ë—Å—Ç–∫–∏–µ `calc(100vh - 160px)`, –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `--header-h` —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á—ë—Ç–æ–º
   - **–§—É–Ω–∫—Ü–∏—è:** `calculateAndSetHeaderHeight()` –Ω–∞ DOMContentLoaded –∏ resize
   - **CSS:** `.dashboard { padding-top: var(--header-h) }`

5. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
   - ‚ùå **–ë—ã–ª–æ:** –ù–µ—Å–∫–æ–ª—å–∫–æ `DOMContentLoaded` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
   - **–ü–æ—Ä—è–¥–æ–∫:** filters ‚Üí alerts ‚Üí navigation ‚Üí density ‚Üí router ‚Üí data

6. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID –≤ DOM**
   - ‚ùå **–ë—ã–ª–æ:** –ù–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ `id`
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–∏–Ω–∏-–ª–∏–Ω—Ç–µ—Ä

### ‚öôÔ∏è –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

7. **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ê–±—Å–æ–ª—é—Ç/100%"**
   - ‚ùå **–ë—ã–ª–æ:** –ù–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `applyShareMode(mode)`
   - **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** `localStorage.dash.mode.share`

8. **–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
   - ‚ùå **–ë—ã–ª–æ:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∫–ª–∞—Å—Å–æ–≤ `density-*`
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `setDensity()`
   - **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ö–ª–∞—Å—Å –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

9. **–°–æ—Å—Ç–æ—è–Ω–∏–µ –∞–ª–µ—Ä—Ç–æ–≤**
   - ‚ùå **–ë—ã–ª–æ:** –°–º–µ—à–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã `.active`/`.open`
   - ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ï–¥–∏–Ω—ã–π –∫–ª–∞—Å—Å `.open`
   - **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:** ESC, click outside, bell click

### üîç –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞

10. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –º–∏–Ω–∏-–ª–∏–Ω—Ç–µ—Ä**
    - ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π ID –≤ DOM
    - ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:** –î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π  
    - ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:** –ü–∞—Ç—Ç–µ—Ä–Ω-–º–∞—Ç—á–∏–Ω–≥ –∫–æ–¥–∞ –Ω–∞ –æ—à–∏–±–∫–∏
    - **API:** `window.__dbg.selfCheck()` ‚Üí 0 –æ—à–∏–±–æ–∫

## –ò–∑–º–µ–Ω–µ–Ω–∏—è API

### –ù–æ–≤—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```javascript
// –ü–µ—á–∞—Ç—å (—Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ)
window.printCurrentPage()
window.printAllPages()

// –≠–∫—Å–ø–æ—Ä—Ç
window.exportCurrentPage()
window.exportAllPages()  
window.executeBatchExport()

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞–º–∏
window.hideRecommendationBanner()
window.snoozeRecommendationBanner()
window.snoozeAlert()
window.jumpToAlertSource()
window.dismissAlert()
```

### CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```css
:root {
    --header-h: 160px; /* –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è */
}
```

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```javascript
// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
applyShareMode('absolute' | 'percentage')

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é
setDensity('compact' | 'comfort')
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```javascript
// –ü–æ–ª–Ω–∞—è —Å–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
const result = window.__dbg.selfCheck();
// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: { errors: [], warnings: [], passed: true }
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ JavaScript –æ—à–∏–±–æ–∫
- ‚úÖ –í–∫–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è (‚â§25ms)
- ‚úÖ "–ê–±—Å–æ–ª—é—Ç/100%" —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- ‚úÖ –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –º–µ–Ω—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–∑—É–∞–ª—å–Ω–æ
- ‚úÖ –ü–µ—á–∞—Ç—å/—ç–∫—Å–ø–æ—Ä—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ —É—Ö–æ–¥–∏—Ç –ø–æ–¥ header
- ‚úÖ Deep-linking —Ä–∞–±–æ—Ç–∞–µ—Ç (#/cash, #/revenue)

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úèÔ∏è **index.html** ‚Äî —É–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏, –¥–æ–±–∞–≤–ª–µ–Ω—ã global exports, CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
- ‚úèÔ∏è **dashboard.bundle.js** ‚Äî —É–ª—É—á—à–µ–Ω –º–∏–Ω–∏-–ª–∏–Ω—Ç–µ—Ä, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–µ–π

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  
- ‚úèÔ∏è **acceptance-tests.md** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã 26-35 –¥–ª—è S6.1
- ‚úèÔ∏è **README.md** ‚Äî —Ä–∞–∑–¥–µ–ª "Sprint 6.1 - –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è"
- ‚úèÔ∏è **integration-guide.md** ‚Äî –Ω–æ–≤—ã–µ API –∏ –ø—Ä–∏–º–µ—Ä—ã BSL –∫–æ–¥–∞

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ **V8WebKit 8.3.27+** (CSS variables, performance API)
- ‚úÖ **–ë–µ–∑ breaking changes** –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** `window.external1C` API
- ‚úÖ **1–° –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π BSL –∫–æ–¥–∞

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚ö° **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü:** <25ms (—Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)
- ‚ö° **updateDashboard():** <50ms (—Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)  
- ‚ö° **selfCheck():** <10ms runtime –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚ö° **Header calculation:** <1ms CSS variable update

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É**  
**–°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç:** –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —É–≥–ª—É–±–ª–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ ML –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ