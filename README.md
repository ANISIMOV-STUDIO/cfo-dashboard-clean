# CFO Dashboard - Clean Production Build

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### Python —Å–µ—Ä–≤–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
python serve.py
```
–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://localhost:8080

### –ü—Ä—è–º–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
–û—Ç–∫—Ä–æ–π—Ç–µ `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## –§–∞–π–ª—ã

- `index.html` ‚Äî –ø–æ–ª–Ω—ã–π CFO –¥–∞—à–±–æ—Ä–¥ (–≤—Å–µ —Å—Ç–∏–ª–∏ –∏ JS –∏–Ω–ª–∞–π–Ω)
- `sample-data.json` ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- `data-schema.json` ‚Äî JSON —Å—Ö–µ–º–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `alerts-config.json` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤
- `integration-guide.md` ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ 1–°
- `acceptance-tests.md` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

## API –¥–ª—è 1–°

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
window.external1C.updateDashboard(jsonData);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
window.external1C.getDashboardState();

// Debug —Ñ—É–Ω–∫—Ü–∏–∏
window.__dbg.waterfallDebug();
window.__dbg.varianceDebug();
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **Waterfall –î–î–°** —Å –ª–∏–Ω–∏–µ–π –æ—Å—Ç–∞—Ç–∫–∞ –∏ —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—è–º–∏  
‚úÖ **Variance –ü–ª–∞–Ω vs –§–∞–∫—Ç** —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π IBCS –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π  
‚úÖ **9 —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º CCC = DSO + DII - DPO  
‚úÖ **Smart –¥–µ–±–∏—Ç–æ—Ä–∫–∞** —Å –∞–≤—Ç–æ–±–∞–∫–µ—Ç–∏–∑–∞—Ü–∏–µ–π –∏ DSO —Ä–∞—Å—á—ë—Ç–æ–º  
‚úÖ **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ê–±—Å–æ–ª—é—Ç/100%** —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ localStorage  
‚úÖ **IBCS —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã**: —Ñ–∞–∫—Ç —á—ë—Ä–Ω—ã–π, –ø–ª–∞–Ω –∫–æ–Ω—Ç—É—Ä, –ü–ì —Å–µ—Ä—ã–π, –ø—Ä–æ–≥–Ω–æ–∑ –ø—É–Ω–∫—Ç–∏—Ä  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ‚â§50ms, –±–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–π, canvas reuse  
‚úÖ **1–° —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: V8WebKit 8.3.27, IIFE, –±–µ–∑ –º–æ–¥—É–ª–µ–π  

## Sprint 6.1 - –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è (–≤–∞–∂–Ω–æ!)

### –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ S6.1:

üîß **–£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏ –∫–æ–¥–∞:**
- –û—Å—Ç–∞–≤–ª–µ–Ω–∞ –µ–¥–∏–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `ensureHiDPI` (–≤ dashboard.bundle.js)
- –£–¥–∞–ª–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã ReferenceError –¥–ª—è –ø–µ—á–∞—Ç–∏/—ç–∫—Å–ø–æ—Ä—Ç–∞
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (`.newData`, `Math.max.`)

üèóÔ∏è **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ header:**
- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `--header-h` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- –ö–æ–Ω—Ç–µ–Ω—Ç –±–æ–ª—å—à–µ –Ω–µ —É—Ö–æ–¥–∏—Ç –ø–æ–¥ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é —à–∞–ø–∫—É
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —ç–∫—Ä–∞–Ω–∞
- –í—ã—Å–æ—Ç–∞ —à–∞–ø–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ResizeObserver`

‚öôÔ∏è **–ï–¥–∏–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–¥–∏–Ω `DOMContentLoaded`
- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `applyShareMode()` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è "–ê–±—Å–æ–ª—é—Ç/100%"
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—á–∞—Ç–∏/—ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `window`

üîç **–£–ª—É—á—à–µ–Ω–Ω—ã–π –º–∏–Ω–∏-–ª–∏–Ω—Ç–µ—Ä:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–µ–π ID –≤ DOM –Ω–∞ —ç—Ç–∞–ø–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –î–µ—Ç–µ–∫—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ü–æ–∏—Å–∫ inline‚Äë–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ `transform: scale` –Ω–∞ `<canvas>`
- `window.__dbg.selfCheck()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 –æ—à–∏–±–æ–∫ –Ω–∞ —á–∏—Å—Ç–æ–π —Å–±–æ—Ä–∫–µ

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (S6.1):

```javascript
// –ü–µ—á–∞—Ç—å
window.printCurrentPage()
window.printAllPages()

// –≠–∫—Å–ø–æ—Ä—Ç
window.exportCurrentPage()
window.exportAllPages()
window.executeBatchExport()

// –ê–ª–µ—Ä—Ç—ã
window.hideRecommendationBanner()
window.snoozeAlert()
window.dismissAlert()
```

### CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤—ã—Å–æ—Ç—ã header:

```css
:root {
    --header-h: 160px; /* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è JS */
}

.dashboard {
    padding-top: var(--header-h);
}

.page-body {
    height: calc(100vh - var(--header-h));
}
```

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ S6.1
window.__dbg.selfCheck()

// –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
// { errors: [], warnings: [], passed: true }
```

## –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üöÄ